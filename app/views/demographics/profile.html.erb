<!-- ========================= Show Profile Page Starts ========================= -->

<!--<style>-->
<!--.chosen-container-multi .chosen-choices li.search-field input[type="text"] {-->
<!--height: 25px;-->
<!--}-->
<!--</style>-->

<!-- Display Movies, Music, Books here -->

<!--<section id="view_profile_section">-->
<!--<div class="container">-->
<!--<div class="row" style="padding-top: 3%;">-->
<!--<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">-->
<!--<div class="ui-widget">-->
<!--<label for="movies">Search Movies :- </label>-->
<!--<input id="movies_search_textfield">-->
<!--<%#= select_tag "movies_search_textfield", "".html_safe, multiple: true, class: 'chosen-select ui-autocomplete-input' %>-->
<!--</div>-->

<!--<ul id="demo8" name="demo8"></ul>-->

<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</section>-->
<style>
    .name_text {
        font-weight: bold;
        font-size: 1.5em;
    }

    .profilometer_text {
        font-weight: bold;
        font-size: 1.2em;
        color: #38C8E0;
    }

    .user_detail {
        font-size: 1em;
    }

    .hd_list {
        font-family: "open sans";
        font-size: 1.1em;
        color: #f7f7f7;
    }
    .invitefriend{
        margin-left: 22px;
        color: #FFFFFF;
        font-family: 'Open Sans', sans-serif;

    }
    #edit_profile_text{
        background-color: white;
        padding: 5px;
        text-align: center
    }
    #edit_profile_text>a:hover{
        background-color: transparent;
        color: #38C8E0;
    }
    #edit_profile_text>a:link{color: #38C8E0;}
    #edit_profile_text>a:visited { color: #38C8E0;}
    #edit_profile_text>a:hover   { color: #38C8E0;}
    #edit_profile_text>a:active  {color:yellow;}

    /*.prof-demo-container{*/
    /*padding: 5%;*/
    /*}*/
</style>
<section id="view_profile_section" style="background-image: url('/assets/profile_back.jpg'); padding: 0 5% 5% 2%;">
  <div class="row" style="padding-top: 3%;">
    <div class="col-lg-9">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div class="blue name_text">
              <% if params[:id].to_s != (current_user.id).to_s %>
                  <%= @user_nick_name %>
              <% else %>
                  <b> <%= @user_name %> </b>
              <% end %>
            </div>
            <table style="color: white;">
              <tr>
                <td class="user_detail"><i class="fa fa-user"></i></td>
                <td class="user_detail"><%= "#{@user_gender}, #{@user_age}" %></td>
              </tr>
              <tr>
                <td class="user_detail"><i class="fa fa-flag"></i></td>
                <td class="user_detail"><%= @user_religion %></td>
              </tr>
              <tr>
                <td class="user_detail"><i class="fa fa-lightbulb-o"></i></td>
                <td class="user_detail">Creative Head</td>
              </tr>
              <tr>
                <td class="user_detail"><i class="fa fa-globe"></i></td>
                <td class="user_detail">User, Location</td>
              </tr>
            </table>
          </div>
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-8 col-lg-offset-4">
              <div class="row">
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-5 col-lg-offset-1" style="background-color: #38C8E0;">
                  <div class="prof-demo-container">
                    <img src="/assets/whiteglass.png" alt="" class="img-responsive"/>

                    <p class="text-center"><%= @user_drinking %></p>
                  </div>
                </div>

                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-5 col-lg-offset-1" style="background-color: #38C8E0;">
                  <div class="prof-demo-container">
                    <img src="/assets/whitesmokes.png" alt="" class="img-responsive"/>

                    <p class="text-center" style="margin-top: 1%;"><%= @user_smoking %></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <h5 class="white" style="background-color: #38C8E0; padding: 2%; font-size: 1.3em;">About myself</h5>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p class="white"><%= @user_desc %></p>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <h5 class="white" style="background-color: #38C8E0; padding: 2%; font-size: 1.3em">Hobbies</h5>

            <div class="row">
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 white">
                <i class="fa fa-thumbs-up fa-5x blue"></i>
              </div>
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 white">
                <div class="hd_list">Reading</div>
                <div class="hd_list">Writing</div>
                <div class="hd_list">Sleeping</div>
                <div class="hd_list">Drinking</div>
                <div class="hd_list">Movies</div>
              </div>
            </div>
          </div>
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <h5 class="white" style="background-color: #38C8E0; padding: 2%; font-size: 1.3em">How my friends Describe
              me</h5>

            <div class="row">
              <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 white">
                <i class="fa fa-comments fa-5x blue"></i>
              </div>
              <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 white">
                <div class="hd_list">Artistic</div>

                <div class="hd_list">Athletic</div>

                <div class="hd_list">Emotinal</div>

                <div class="hd_list">Sensitive</div>

                <div class="hd_list">Sexy</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="row">
          <div class="profilometer_text">
            PROFILE'O' METER
          </div>
        </div>
        <br/>
        <div class="row">
          <div class="col-lg-12">
              <div class="knob_container">
              <input type="text" value="29" class="dial" data-width="150"
                     data-fgColor="red"
                     data-skin="tron"
                     data-thickness=".4"
                     data-bgColor="#FFFFFF"
                     data-displayPrevious=true data-displayInput="false">
              </div>
          <p class="white">Stating to look good!</p>
         </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <i class="fa fa-envelope fa-3x white iconstyle"></i>
            <p class="white invitefriend">Invite A Friend</p>
          </div>
        </div>
        <p id="edit_profile_text">
          <%= link_to 'Edit My Profile', edit_profile_path(current_user.id), :class => "blue" %>
        </p>
      </div>
    </div>
  </div>

  <div class="row" style="padding-top: 3%;">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="ui-widget">
        <label for="music">Search Music :- </label>
        <ul id="myTags">
          <!-- Existing list items will be pre-added to the tags -->
          <li>Tag1</li>
          <li>Tag2</li>
        </ul>
        <%#= select_tag "music_search_textfield", "".html_safe, multiple: true, class: 'chosen-select ui-autocomplete-input' %>
      </div>
    </div>
  </div>


</section>

<!-- ========================= Show Profile Page Ends ========================= -->
<!--<script src="/assets/gauge.min.js"></script>-->
<script>
    $(function () {
        $("#myTags").tagit();

        $(".dial").knob();

        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];

        var moviesJSON = [];

        //auto_complete_movie(moviesJSON);

        //$('#movies_search_textfield').on('click', function(){
        //auto_complete_movie(moviesJSON);
        //});


        //https://github.com/tsechingho/chosen-rails
        var movie_search_text_field;
        movie_search_text_field = $('.chosen-container');
        var listing = $(movie_search_text_field).find('.chosen-drop').find('.chosen-results'); //results in chosen
        //console.log(listing);
        var movies_search_select_box = $("#movies_search_textfield"); // append <option>movie_name</option> in this

        $(movie_search_text_field).find(":input").on('keyup', function (e) {
            //console.log($(this).val());

            var movie_search_text = $(this).val();
            var movie_search_text_len = movie_search_text.length;
            //console.log(movie_search_text + ", " + movie_search_text_len);

            //37 - left, 38 - up, 39 - right, 40 - down
            //if (e.keyCode == 37) {
            //alert( "left pressed" );
            //return false;
            //}

            // get keycode of current keypress event
            var code = (e.keyCode ? e.keyCode : e.which);

            // do nothing if it's an arrow key
            if (code == 37 || code == 38 || code == 39 || code == 40) {
                //$('.chosen-select').trigger("chosen:updated");
                return;
            }
            else {
                if ((movie_search_text_len >= 5)) {
                    //$(movies_search_select_box).html("");
                    var data = {movie_search_text: []};
                    data["movie_search_text"].push(movie_search_text);

                    $.ajax({
                        url: "/search_movies_themoviedb",
                        type: "post",
                        async: false,
                        data: JSON.stringify(data),
                        contentType: "application/json",
                        success: function (data) {
                            //console.log("data :- " + data);
                            var movie_name, movie_poster, movie_release_date;
                            //$(movies_search_select_box).html("");
                            $.each(data, function (i, obj) {
                                //movie_name = obj.split("|||")[0];
                                movie_name = obj.title;
                                //moviesJSON.push(movie_name);
                                $(movies_search_select_box).append('<option value=' + i + '>' + movie_name + '</option>');
                                //<li class="active-result" style="" data-option-array-index="0">Read</li>
                                $(listing).append('<li class="active-result" style="" data-option-array-index=' + i + '>' + movie_name + '</li>');
                                //$('.chosen-select').trigger("chosen:updated");
                                //$("#DropDownID").trigger("liszt:updated");
                                //$(movies_search_select_box).trigger("liszt:updated");
                            });
                            $(movies_search_select_box).chosen();
                            //auto_complete_movie(moviesJSON);
                        }
                    });
                }
            }
        });


        $('#myTags').find('.ui-widget-content').on('keypress', function (e) {


            var music_search_text = $(this).val()
            var music_search_text_len = music_search_text.length;

            if ((music_search_text_len >= 5)) {
                var data = {music_search_text: []};
                data["music_search_text"].push(music_search_text);

                $.ajax({
                    url: "/search_music_db",
                    type: "post",
                    async: false,
                    data: JSON.stringify(data),
                    contentType: "application/json",
                    success: function (data) {
                        $.each(data, function (i, obj) {
//                        $('#myTags').find('.tagit-new').append(obj)
                        });

                    }
                });
            }

        })


    });

    function auto_complete_movie(moviesJSON) {
        console.log("auto_complete_movie() called");
        $("#movies_search_textfield").autocomplete({
            source: moviesJSON
        });
    }

</script>
<!--http://rubygems.org/gems/rails4-autocomplete-->
<!--https://github.com/joliss/jquery-ui-rails-->